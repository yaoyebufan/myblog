<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>博客管理</title>
    <meta name="description" content="这是一个blog页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="icon" type="image/png" th:href="@{/admin_assets/i/favicon.png}">
    <link rel="apple-touch-icon-precomposed" th:href="@{/admin_assets/i/app-icon72x72@2x.png}">
    <meta name="apple-mobile-web-app-title" content="Amaze UI"/>
    <script th:src="@{/admin_assets/js/echarts.min.js}"></script>
    <link rel="stylesheet" th:href="@{/admin_assets/css/amazeui.min.css}"/>
    <link rel="stylesheet" th:href="@{/admin_assets/css/amazeui.datatables.min.css}"/>
    <link rel="stylesheet" th:href="@{/admin_assets/css/app.css}">
    <script th:src="@{/admin_assets/js/jquery.min.js}"></script>
</head>

<body data-type="index">
<script th:src="@{/admin_assets/js/theme.js}"></script>
<div class="am-g tpl-g">
    <!-- 头部 -->
    <header th:replace="admin/include/header :: header"></header>
    <!-- 风格切换 -->
    <div th:replace="admin/include/tpl-skiner :: tpl-skiner"></div>
    <!-- 侧边导航栏 -->
    <div th:replace="admin/include/left :: left"></div>
    <!-- 内容区域 id="tpl-echarts"-->
    <div class="tpl-content-wrapper">
        <div class="row-content am-cf">
            <div class="row am-cf">
                <!--为了让折叠按钮生效-->
                <div id="tpl-echarts"></div>

                <div class="row">

                    <div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
                        <div class="widget am-cf">
                            <div class="widget-head am-cf">
                                <div class="widget-title am-fl">修改标签信息</div>
                                <div class="widget-function am-fr">
                                    <a href="javascript:;" class="am-icon-cog"></a>
                                </div>
                            </div>
                            <div class="widget-body am-fr">
                                <div th:style="${messages==null}?'display:none'" class="am-alert am-alert-warning"
                                     data-am-alert>
                                    <button type="button" class="am-close">&times;</button>
                                    <p th:text="${messages}"></p>
                                </div>
                                <form class="am-form tpl-form-border-form" action="/admin/labelUpdate" method="post">
                                    <div class="am-form-group">
                                        <label for="labelId" class="am-u-sm-12 am-form-label am-text-left">标签ID <span
                                                class="tpl-form-line-small-title">labelId</span></label>
                                        <div class="am-u-sm-12">
                                            <input th:value="${label.labelId}" type="text" name="labelId"
                                                   class="tpl-form-input am-margin-top-xs"
                                                   id="labelId" placeholder="请输入标签Id" readonly="readonly">
                                            <small>标签Id为必填</small>
                                        </div>
                                    </div>
                                    <div class="am-form-group">
                                        <label for="labelName" class="am-u-sm-12 am-form-label am-text-left">标签名称 <span
                                                class="tpl-form-line-small-title">labelName</span></label>
                                        <div class="am-u-sm-12">
                                            <input th:value="${label.labelName}" type="text" name="labelName"
                                                   class="tpl-form-input am-margin-top-xs"
                                                   id="labelName" placeholder="请输入标签名称">
                                            <small>标签名称为必填</small>
                                        </div>
                                    </div>

                                    <div class="am-form-group">
                                        <label for="labelAlias" class="am-u-sm-12 am-form-label am-text-left">标签别名 <span
                                                class="tpl-form-line-small-title">labelAlias</span></label>
                                        <div class="am-u-sm-12">
                                            <input type="text" name="labelAlias" class="tpl-form-input am-margin-top-xs"
                                                   id="labelAlias" th:value="${label.labelAlias}" placeholder="请输入标签别名">
                                            <small>标签别名为非必填</small>
                                        </div>
                                    </div>
                                    <div class="am-form-group">
                                        <label for="labelDescripation" class="am-u-sm-12 am-form-label am-text-left">标签描述 <span
                                                class="tpl-form-line-small-title">labelDescripation</span></label>
                                        <div class="am-u-sm-12">
                                            <input type="text" name="labelDescripation" class="tpl-form-input am-margin-top-xs"
                                                   id="labelDescripation" th:value="${label.labelDescripation}" placeholder="请输入标签描述">
                                            <small>标签描述为非必填</small>
                                        </div>
                                    </div>
                                    <div class="am-form-group">
                                        <label for="status"
                                               class="am-u-sm-12 am-form-label  am-text-left">启用标签账号</label>
                                        <div class="am-u-sm-12">
                                            <div class="tpl-switch">
                                                <input id="status" name="status" type="checkbox"
                                                       class="ios-switch bigswitch tpl-switch-btn am-margin-top-xs"
                                                       th:checked="${label.labelStatus==1}? 'checked'">
                                                <div class="tpl-switch-btn-view">
                                                    <div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="am-form-group">
                                        <div class="am-u-sm-12 am-u-sm-push-12">
                                            <button type="submit"
                                                    class="am-btn am-btn-primary tpl-btn-bg-color-success ">提交
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer th:replace="admin/include/foot :: footer"></footer>
</body>
<script type="text/javascript">
    $(function () {
        $("#upload").click(function () {
            var form = new FormData();
            var params = $("#userPhoto").val();
            form.append("file", document.getElementById("file").files[0]);
            form.append("params",params);
            $.ajax({
                url: "/fileUpdate",        //后台url
                data: form,
                cache: false,
                async: false,
                type: "POST",                   //类型，POST或者GET
                dataType: "json",              //数据返回类型，可以是xml、json等
                processData: false,
                contentType: false,
                enctype: 'multipart/form-data',
                success: function (data) {      //成功，回调函数
                    if (data.success == 1) {
                        $("#url img").attr("src", data.url);
                        $("#userPhoto").val(data.url);
                        $("#url1").html(data.url);
                        alert("图片更改成功！")

                    } else {
                        alert(data.message);
                        alert("上传失败");
                    }

                },
                error: function (er) {
                    alert(er);//失败，回调函数
                }
            });
        });
        $("#cancel").click(function () {
            var params = $("#userPhoto").val();
            $.ajax({
                url: "/fileDelete/?params=" + params,
                type: "POST",
                contentType: "application/json",//一定要加的属性
                dataType: "json",
                success: function (data) {
                    //data是服务器返回的数据
                    if (data.success == 1) {
                        $("#userPhoto").val("");
                    }
                    alert(data.message);
                },
                error: function (e) {
                    alert(e);//异常信息
                }
            });
        });
    });

</script>
</html>